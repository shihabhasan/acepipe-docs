============
User guide
============


Quick start
^^^^^^^^^^^

ACEPipe is installed in ACE HPC clusters. To activate ACEPipe::

    $ source activate acepipe

To get the help or available tools in ACEPipe::

    $ acepipe -h
    $ acepipe --help

Which will return the available commands available:

.. code-block:: ruby

    Usage: acepipe [OPTIONS] COMMAND [ARGS]...

    Options:
      -h, --help  Show this message and exit.

    Commands:
      makedb
      runpipe
      runqc
      runsingle

To get further options available in the command::

    $ acepipe runpipe -h
    $ acepipe runpipe --help

Which will return all options available for the command:

.. code-block:: ruby

    Usage: acepipe runpipe [OPTIONS]

    Options:
      -h, --help                      Show this message and exit.
      -s, --sheetfile TEXT            provide sheetfile location
                                      default=samplesheet.tab
      -o, --outdir TEXT               provide output folder location
                                      default=acepipe_results
      -e, --email TEXT                provide email id
      -dt, --taxonomydb TEXT          provide reference taxonomy database location
                                      example:
                                      /usr/local/qiime_db/silva_taxonomy_db.qza
                                      default=silvadb & unitedb
      -dg, --genomedb TEXT            provide reference sequence database location
                                      example: /usr/local/qiime_db/silva_seq_db.qz
                                      default=silvadb & unitedb
      -qm, --qiimemode [forward|both]
                                      provide qiime reads mode
                                      default=forward
      -l, --readlength INTEGER        provide reads length to keep after trimming
                                      default=250
      -q, --quality INTEGER           provide quality score threshold value
                                      default=15
      -j, --joblist TEXT              provide job id as a comma-separated list
                                      default=all


Input
^^^^^

Input file for ACEPipe is the samplesheet file which is generated by ACE LIMS and provided by the ACE Sequencing Team.
Samplesheet is a tab delimited file which contains some information such as:
    * Sample_ID
    * Sample_Name
    * Sample_Plate
    * Sample_Well
    * I7_Index_ID
    * index
    * I5_Index_ID
    * index2
    * Sample_Project
    * Description
    * Read 1 File
    * Read 2 File
    * Fwd_Primer_Name
    * Fwd_Primer_TS_seq
    * Rev_Primer_Name
    * Rev_Primer_TS_seq
    * Client_Sample_Name

ACEPipe expects the filename should shart with sample id. If your file name starts with job id, please rename the files.
The fastq file name format is ``CasavaOneEightSingleLanePerSampleDirFmt`` which naming is as ``'.+_.+_L[0-9][0-9][0-9]_R[12]_001\.fastq\.gz'``.
So the name of your files should be as: ``SAMPLEID_JOBID_OTHERID_L001_R1_001.fastq.gz``.
Example: ``SB2658_J1235_S352_L001_R1_001.fastq.gz`` and ``SB2658_J1235_S352_L001_R2_001.fastq.gz``


Output
^^^^^^

ACEPipe wraps all the files with a html file. Transfer the ``result`` folder to your local computer and
open the ``index.html`` file in any internet browser (Google Chrome preferred).


